<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>과제 4</title>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.9.0/lib/p5.js"></script>
</head>
<body>
<script>
let trunkW = 25;
let trunkH = 63;
let baseX;
let baseY;
let timeOffset;

function setup() {
  createCanvas(250, 166);
  colorMode(HSB, 360, 100, 100);
  frameRate(10);

  baseX = width / 2;
  baseY = height / 2 + 20;

  timeOffset = random(100);
}

function draw() {
  background(90, 10, 95);
  let time = frameCount * 0.05 + timeOffset;

  let leafHueShift = map(sin(time * 0.4), -1, 1, 60, 180);
  let trunkHueShift = map(cos(time * 0.8), -1, 1, 15, 45);

  let leafColor = color(leafHueShift, 80, 70);
  let trunkColor = color(trunkHueShift, 60, 55);

  let pulse = map(sin(time * 1.5), -1, 1, 0.9, 1.1);
  let sizeFactor = pulse;

  let horizontalSway = sin(time * 0.8) * 5;
  push();
  translate(horizontalSway, 0);

  fill(trunkColor);
  noStroke();
  rectMode(CENTER);
  rect(baseX, baseY, trunkW, trunkH);

  fill(leafColor);
  stroke(0);
  strokeWeight(1);

  let w1 = 50 * sizeFactor;
  let h1 = 38 * sizeFactor;
  triangle(baseX, baseY - h1 - 3, baseX - w1, baseY + 18, baseX + w1, baseY + 18);

  let w2 = 38 * sizeFactor;
  let h2 = 50 * sizeFactor;
  triangle(baseX, baseY - h2 - 10, baseX - w2, baseY - 5, baseX + w2, baseY - 5);

  let w3 = 25 * sizeFactor;
  let h3 = 50 * sizeFactor;
  triangle(baseX, baseY - h3 - 25, baseX - w3, baseY - 35, baseX + w3, baseY - 35);

  pop();

  fill(40, 50, 50);
  noStroke();
  rect(0, height - 21, width, 21);
}
</script>
</body>
</html>
